# --- PROJECT CARTESIAN SAFE-MODE CONFIG ---

monitor=,preferred,auto,1

input {
    kb_layout = us
    follow_mouse = 1
    repeat_rate = 35
    repeat_delay = 300
}

general {
    gaps_in = 0
    gaps_out = 0
    border_size = 1
    col.active_border = rgba(33ccffee)
    col.inactive_border = rgba(595959aa)
    layout = dwindle
}

decoration {
    rounding = 0
}

animations {
    enabled = false
}

cursor {
    no_hardware_cursors = true
}

misc {
    vfr = true
    disable_hyprland_logo = true
    disable_splash_rendering = true
}

# --- CONVENIENCE SERVICES ---

# 1. THE HANDSHAKE
# This exports the display location to the systemd user bus.
# Must be at the very top of exec-once to prevent client crashes.
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP

# 2. Start VBox services 
exec-once = pkill VBoxClient; VBoxClient --clipboard && VBoxClient --draganddrop && VBoxClient --checkhostversion

# 3. Wayland Clipboard Bridge
exec-once = wl-paste --watch cliphist store

# 4. UI Elements
exec-once = waybar

# 5. Terminal Launch
exec-once = sleep 0.2 && kitty

# 6. Shared Folder Mount
# Accessing ~/share triggers automount via /etc/fstab

# --- KEYBINDINGS ---
bind = SUPER, Q, exec, kitty
bind = SUPER, E, exec, thunar
bind = SUPER, M, exit,
bind = SUPER, V, exec, cliphist list | wofi --dmenu | cliphist decode | wl-copy

# Debugging binding
bind = SUPER, D, exec, kitty --debug-gl > /home/cartesian/kitty_debug.log 2>&1